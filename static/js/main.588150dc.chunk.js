(this["webpackJsonpcloud-games-front-end"]=this["webpackJsonpcloud-games-front-end"]||[]).push([[0],{51:function(e){e.exports=JSON.parse('{"apiKey":"AIzaSyAIugJFMJTjoOsFAZxCxAuP7UpSts7Due8","authDomain":"cloudboardgames.firebaseapp.com","databaseURL":"https://cloudboardgames.firebaseio.com","projectId":"cloudboardgames","storageBucket":"cloudboardgames.appspot.com","messagingSenderId":"916102323278","appId":"1:916102323278:web:3d03af6fad11466261371f","measurementId":"G-C5KNXJSQ2G","production":false}')},70:function(e,t,n){},71:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var o=n(7),a=n(1),s=n.n(a),r=n(15),c=n.n(r),i=(n(70),n(71),n(19)),u=n(20),b=n(17),l=n(24),d=n(23),h=n(9),j=n(51),p=n(44),O=n(52),f=n.n(O),v=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).uiConfig={signInFlow:"popup",signInOptions:[p.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},o.unregisterAuthObserver=function(){},o}return Object(u.a)(n,[{key:"unregisterAuthObserver",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.unregisterAuthObserver=p.a.auth().onAuthStateChanged((function(t){return e.props.onLogin(t)}))}},{key:"componentWillUnmount",value:function(){this.unregisterAuthObserver()}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(f.a,{uiConfig:this.uiConfig,firebaseAuth:p.a.auth()})})}}]),n}(a.Component),y=n(117),g=n(121),m=n(122),x=n(123),k=n(125),L=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).handleLogout=o.handleLogout.bind(Object(b.a)(o)),o}return Object(u.a)(n,[{key:"handleLogout",value:function(e){this.props.onLogout()}},{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsx)(y.a,{position:"static",children:Object(o.jsx)(g.a,{children:Object(o.jsxs)(m.a,{justify:"space-between",container:!0,children:[Object(o.jsx)(m.a,{item:!0,children:Object(o.jsx)(x.a,{variant:"h6",children:"Cloud Games"})}),Object(o.jsx)(m.a,{item:!0,children:Object(o.jsx)(k.a,{hidden:!0,color:"inherit",onClick:this.handleLogout,children:"Logout"})})]})})})})}}]),n}(a.Component),C=n(22),A=n.n(C),w=n(33),S=n(124),I=function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,null,[{key:"requestCreateLobby",value:function(){var e=Object(w.a)(A.a.mark((function e(t,n){var o,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={userId:t,gameType:n},console.log("create API Utils call"),e.next=4,this.putRequest("https://us-central1-cloudboardgames.cloudfunctions.net/createNewLobby",o);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestJoinLobby",value:function(){var e=Object(w.a)(A.a.mark((function e(t,n){var o,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={userId:t,lobbyCode:n},e.next=3,this.putRequest("https://us-central1-cloudboardgames.cloudfunctions.net/joinLobby",o);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"putRequest",value:function(){var e=Object(w.a)(A.a.mark((function e(t,n){var o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("create putRequest call on url: "+t),"https://cors-anywhere.herokuapp.com/",e.next=4,fetch("https://cors-anywhere.herokuapp.com/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(){return console.log("Can\u2019t access "+t+" response. Blocked by browser?")}));case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),T=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={roomCode:"",selectedGame:"COLEBOXGAMES"},o.handleRoomCodeChange=o.handleRoomCodeChange.bind(Object(b.a)(o)),o.handleSelectedGameChange=o.handleSelectedGameChange.bind(Object(b.a)(o)),o.handleJoinLobbyButtonPress=o.handleJoinLobbyButtonPress.bind(Object(b.a)(o)),o.handleCreateLobbyButtonPress=o.handleCreateLobbyButtonPress.bind(Object(b.a)(o)),o.createLobby=o.createLobby.bind(Object(b.a)(o)),o.joinLobby=o.joinLobby.bind(Object(b.a)(o)),o}return Object(u.a)(n,[{key:"render",value:function(){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Join Lobby"}),Object(o.jsx)("div",{children:Object(o.jsx)(S.a,{variant:"outlined",label:"Room Code",value:this.state.roomCode,onChange:this.handleRoomCodeChange})}),Object(o.jsx)("br",{}),Object(o.jsx)("div",{children:Object(o.jsx)(k.a,{variant:"outlined",onClick:this.handleJoinLobbyButtonPress,children:"Join"})})]}),Object(o.jsx)("br",{}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h3",{children:"Create Lobby"}),Object(o.jsx)("div",{children:Object(o.jsx)("select",{name:"createLobbyPicker",onChange:this.handleSelectedGameChange,children:Object(o.jsx)("option",{value:"COLEBOXGAMES",children:"Cole Box Games"})})}),Object(o.jsx)("br",{}),Object(o.jsx)("div",{children:Object(o.jsx)(k.a,{variant:"outlined",onClick:this.handleCreateLobbyButtonPress,children:"Create"})})]})]})}},{key:"handleRoomCodeChange",value:function(e){this.setState({roomCode:e.target.value})}},{key:"handleSelectedGameChange",value:function(e){this.setState({selectedGame:e.target.value})}},{key:"handleCreateLobbyButtonPress",value:function(e){this.createLobby()}},{key:"handleJoinLobbyButtonPress",value:function(e){this.joinLobby(this.state.roomCode)}},{key:"createLobby",value:function(){var e=Object(w.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.requestCreateLobby(this.props.userId,this.state.selectedGame);case 2:if(!(t=e.sent).success){e.next=8;break}return e.next=6,this.joinLobby(t.data.lobbyCode);case 6:e.next=9;break;case 8:console.log(t.message);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinLobby",value:function(){var e=Object(w.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.requestJoinLobby(this.props.userId,t);case 2:(n=e.sent).success?this.props.setLobbyAccessToken(n.data.accessToken):console.log(n.message);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(a.Component),J=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={data:null},o}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.db.ref("lobbies/"+this.props.accessToken).on("value",(function(t){console.log("got an update");var n=t.val();e.setState({data:n})}))}},{key:"render",value:function(){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:["Got a lobby id of ",this.props.accessToken,"!"]}),Object(o.jsx)("div",{children:Object(o.jsx)("pre",{children:JSON.stringify(this.state.data,null,2)})})]})}}]),n}(a.Component),B=j,G=h.a.initializeApp(B),P=h.a.database(G),R=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={currentUser:null,gameData:null,lobbyAccessToken:null},o.onLogin=o.onLogin.bind(Object(b.a)(o)),o.onLogout=o.onLogout.bind(Object(b.a)(o)),o.setLobbyAccessToken=o.setLobbyAccessToken.bind(Object(b.a)(o)),o}return Object(u.a)(n,[{key:"render",value:function(){var e=null;return e=null==this.state.currentUser?Object(o.jsx)(v,{onLogin:this.onLogin}):null==this.state.lobbyAccessToken?Object(o.jsx)(T,{db:P,userId:this.state.currentUser.uid,setLobbyAccessToken:this.setLobbyAccessToken}):Object(o.jsx)(J,{db:P,userId:this.state.currentUser.uid,accessToken:this.state.lobbyAccessToken}),Object(o.jsxs)("div",{children:[Object(o.jsx)(L,{onLogout:this.onLogout}),Object(o.jsx)("div",{className:"mainContent",children:e})]})}},{key:"onLogin",value:function(e){this.setState({currentUser:e})}},{key:"onLogout",value:function(){h.a.auth().signOut(),this.setState({currentUser:null})}},{key:"setLobbyAccessToken",value:function(e){this.setState({lobbyAccessToken:e})}}]),n}(a.Component);var U=function(){return Object(o.jsx)(R,{})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(U,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[87,1,2]]]);
//# sourceMappingURL=main.588150dc.chunk.js.map